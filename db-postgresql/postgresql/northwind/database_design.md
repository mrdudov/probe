# Проектирование БД

- Проблема представления предметной области
- Логическое проектирование
- Проблемы плохого проектирования
  - возможность записи не валидных данных
  - вщзможность потери информации (нет нужных связей)
  - отсутствие необходимой информации (забыли то, что было нухно)

## Стадии проектирования

- Анализ требовании предметной облости
- Логическое моделирование предметной области
- Физическое проектирование и нормализация

## Анализ требовании

- Составление USE CASES
- Аналитицеский процесс с уцастием stackholders (владельцевб экспертов домена)

## Логическое проектирование

- Детализирует концептуальную модель БД
- Разные источники включают разные компоненты в логическую модель
- Полностью описывает все ключи
- Полностью определяет типы данных (безотносительно конкретной СУБД)
- Полностью описывает все логические ограничения (спорно)
- Нормализация отношений обычно максимум до формы 3НФ

## Физическая модель данных

- Выбирается конкретная СУБД
- Определяются типы данных
- Определяются индексы
- Могут определяться представления (views)
- Определяются ограничения на доступ (security)

## ER Diadrams

## Базовые советы по проектированию

- Таблица: объект, событие, абстракция
- Поле (колонка): свойство объекта
- Запись (строка): совокупность полей
- Значение в каждом поле по отдельности не должны содержать не валидных данных
- Значение в совокупности полей должны быть непротиворечивы

## Плохие практики

- Игнорирование нормализации - избыточность данных
- Отсутствие стандартов именования на проекте
- Одна таблица для разных по смыслу данных
- Не актуальность репрезентации данных (домен меняется)
- Поле, содержащее более 1 логической части (full_name)
- Поле, содержащее более 1 значения (масивы, когда не надо)
- Вычислимые поля (полная зарплата за все время работы)
- Неправильно выбранные первичные ключи (ИНН - плохой PK)
- Избегать композитных PK (может привести к деградации производительности)
- В идеале, в таблице кроме суррогатного ключа, длжен быть и натуральный
- Правила иногда можно нарушать! Вычислимое поле даёт performance bost? Делаем вычислимое поле...

## нормальная форма

- Нормальная форма (НФ) - свойство отношения, характеризующее его с точки зрения избыточности
- Нормализация - процесс минимизации избыточности отношения (приведения к НФ)

## 1НФ

- Нет строк-дубликатов
- Все атрибуты простых типов данных
- Все значения сколярные

## 2НФ

- Таблица удовлетворяет 1НФ
- Есть первичный ключ
- Все атрибуты (поля) описывают первичный ключ целиком, а не лишь его часть

## 3НФ

- Таблица удовлетворяет 2НФ
- Нет зависимости одних неключевых атрибутов от других
    (все атрибуты зависят от первичного ключа)
